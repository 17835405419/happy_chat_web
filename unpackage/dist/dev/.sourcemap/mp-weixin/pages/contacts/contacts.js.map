{"version":3,"sources":["uni-app:///main.js","webpack:///D:/code/IM_chat/pages/contacts/contacts.vue?ff4b","webpack:///D:/code/IM_chat/pages/contacts/contacts.vue?b97d","webpack:///D:/code/IM_chat/pages/contacts/contacts.vue?febc","webpack:///D:/code/IM_chat/pages/contacts/contacts.vue?bc9c","uni-app:///pages/contacts/contacts.vue","webpack:///D:/code/IM_chat/pages/contacts/contacts.vue?9730","webpack:///D:/code/IM_chat/pages/contacts/contacts.vue?6c55"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","NavBar","data","friendsList","indexList","itemArr","onLoad","computed","methods","getFriendsList","status","beRequest_friendShipInfo","generateIndexAndArray","sensitivity","sortedFriends","getFirstLetter","style","toNewFriends","uni","toAddFriendsInfo","Object","isFriendShip","setTimeout","url","params"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,iBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiI;AACjI;AAC4D;AACL;AACsC;;;AAG7F;AACmK;AACnK,gBAAgB,6KAAU;AAC1B,EAAE,8EAAM;AACR,EAAE,+FAAM;AACR,EAAE,wGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAqmB,CAAgB,knBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;ACoCznB;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA,eACA;EACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;EACA;EACAC,WAEA;EACAC;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OAGA;kBACAC;gBACA;cAAA;gBAAA;gBAHAR;gBAIAA;kBACA,mFACAS;gBAEA;;gBAEA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IAEAC;MAAA;MACA;MACA;MACA;;MAEA;MACA;QACA;QACA;QAEA;UACAC;QACA;MACA;;MAEA;MACAC;QACA;QAEA;UACA;QACA;QAEA;QAEA;UACA;QACA;QAEA;MACA;IACA;IAGAC;MACA;MACA;MAEA;QACA;QACA;UACAC;QACA;QAEA;MACA;QACA;QACA;MACA;IACA;IAEAC;MACA;MACAC;IACA;IACAC;MAEAC;QACAC;MACA;MACA;MACAC;QACAJ;UACAK;UACAC;QACA;MACA;IACA;EAEA;AAEA;AAAA,2B;;;;;;;;;;;;;AC9IA;AAAA;AAAA;AAAA;AAAwoC,CAAgB,0lCAAG,EAAC,C;;;;;;;;;;;ACA5pC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/contacts/contacts.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/contacts/contacts.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./contacts.vue?vue&type=template&id=4ed3d3e6&scoped=true&\"\nvar renderjs\nimport script from \"./contacts.vue?vue&type=script&lang=js&\"\nexport * from \"./contacts.vue?vue&type=script&lang=js&\"\nimport style0 from \"./contacts.vue?vue&type=style&index=0&id=4ed3d3e6&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4ed3d3e6\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/contacts/contacts.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./contacts.vue?vue&type=template&id=4ed3d3e6&scoped=true&\"","var render = function () {}\nvar staticRenderFns = []\nvar recyclableRender\nvar components\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./contacts.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./contacts.vue?vue&type=script&lang=js&\"","<template>\r\n\r\n\t<view class=\"contacts-box\">\r\n\t\t<view class=\"status_bar\">\r\n\t\t\t<!-- 这里是状态栏 -->\r\n\t\t</view>\r\n\t\t<NavBar title=\"联系人\" />\r\n\t\t<view class=\"functional-box\">\r\n\t\t\t<view class=\"list-cell\" @click=\"toNewFriends\">\r\n\t\t\t\t新的朋友\r\n\t\t\t\t<u-badge bgColor=\"red\" :isDot=\"true\" v-show=\"vuex_addfriend\"></u-badge>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"list-cell\">\r\n\t\t\t\t群聊\r\n\t\t\t\t<u-badge bgColor=\"red\" :isDot=\"true\"></u-badge>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<u-index-list :index-list=\"indexList\" :sticky=\"false\">\r\n\t\t\t<template v-for=\"(item, index) in itemArr\" >\r\n\t\t\t\t<u-index-item>\r\n\t\t\t\t\t<u-index-anchor :text=\"indexList[index]\"></u-index-anchor>\r\n\t\t\t\t\t<view class=\"list-cell friendShip\" v-for=\"(cell, index) in item\"  @click=\"toAddFriendsInfo(cell)\">\r\n\t\t\t\t\t\t<u-avatar :src=\"cell.avatarUrl\" shape=\"square\" size=\"70rpx\"></u-avatar>\r\n\t\t\t\t\t\t<view class=\"nickname\">\r\n\t\t\t\t\t\t\t{{cell.nickName}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</u-index-item>\r\n\t\t\t</template>\r\n\t\t</u-index-list>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport NavBar from \"@/components/NavBar.vue\"\r\n\timport Pinyin from 'pinyin';\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tNavBar\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tfriendsList: [],\r\n\t\t\t\tindexList: [],\r\n\t\t\t\titemArr: []\r\n\t\t\t};\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\tthis.getFriendsList()\r\n\t\t},\r\n\t\tcomputed: {\r\n\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tasync getFriendsList() {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tdata\r\n\t\t\t\t} = await this.$u.api.getFriendShip_Api({\r\n\t\t\t\t\tstatus: \"accepted\"\r\n\t\t\t\t})\r\n\t\t\t\tdata.result.forEach((friend) => {\r\n\t\t\t\t\tthis.$store.state.vuex_user.id === friend.userId1 ? this.friendsList.push(friend\r\n\t\t\t\t\t\t.beRequest_friendShipInfo) : this.friendsList.push(friend.request_friendShipInfo)\r\n\r\n\t\t\t\t})\r\n\r\n\t\t\t\t// 动态生成索引列表和二维数组\r\n\t\t\t\tthis.generateIndexAndArray();\r\n\t\t\t},\r\n\r\n\t\t\tgenerateIndexAndArray() {\r\n\t\t\t\t// 清空现有的索引列表和二维数组\r\n\t\t\t\tthis.indexList = [];\r\n\t\t\t\tthis.itemArr = [];\r\n\r\n\t\t\t\t// 将好友列表按昵称首字母排序\r\n\t\t\t\tvar sortedFriends = this.friendsList.sort((a, b) => {\r\n\t\t\t\t\tconst aFirstLetter = this.getFirstLetter(a.nickName);\r\n\t\t\t\t\tconst bFirstLetter = this.getFirstLetter(b.nickName);\r\n\r\n\t\t\t\t\treturn aFirstLetter.localeCompare(bFirstLetter, 'en', {\r\n\t\t\t\t\t\tsensitivity: 'base'\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// 遍历排序后的好友列表，生成索引和二维数组\r\n\t\t\t\tsortedFriends.forEach((friend) => {\r\n\t\t\t\t\tconst firstLetter = this.getFirstLetter(friend.nickName);\r\n\r\n\t\t\t\t\tif (!this.indexList.includes(firstLetter)) {\r\n\t\t\t\t\t\tthis.indexList.push(firstLetter);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst index = this.indexList.indexOf(firstLetter);\r\n\r\n\t\t\t\t\tif (!this.itemArr[index]) {\r\n\t\t\t\t\t\tthis.itemArr[index] = [];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.itemArr[index].push(friend);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\r\n\t\t\tgetFirstLetter(nickName) {\r\n\t\t\t\t// 使用正则表达式检测是否包含中文字符\r\n\t\t\t\tconst containsChinese = /[\\u4e00-\\u9fa5]/.test(nickName);\r\n\r\n\t\t\t\tif (containsChinese) {\r\n\t\t\t\t\t// 中文昵称使用 Pinyin.js 获取拼音首字母\r\n\t\t\t\t\tconst pinyinArray = Pinyin(nickName, {\r\n\t\t\t\t\t\tstyle: Pinyin.STYLE_FIRST_LETTER,\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\treturn pinyinArray.length > 0 ? pinyinArray[0][0].toUpperCase() : '';\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 英文昵称直接取首字母\r\n\t\t\t\t\treturn nickName.charAt(0).toUpperCase();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\ttoNewFriends() {\r\n\t\t\t\tthis.$u.vuex(\"vuex_addfriend\", false)\r\n\t\t\t\tuni.$u.route(\"pages/newFriends/newFriends\")\r\n\t\t\t},\r\n\t\t\ttoAddFriendsInfo(item) {\r\n\r\n\t\t\t\tObject.assign(item, {\r\n\t\t\t\t\tisFriendShip: true\r\n\t\t\t\t})\r\n\t\t\t\t// 跳转至用户详情界面\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tuni.$u.route({\r\n\t\t\t\t\t\turl: \"pages/addFriendsInfo/addFriendsInfo\",\r\n\t\t\t\t\t\tparams: item\r\n\t\t\t\t\t})\r\n\t\t\t\t}, 300)\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n\t.list-cell {\r\n\t\tdisplay: flex;\r\n\t\tbox-sizing: border-box;\r\n\t\twidth: 100%;\r\n\t\tpadding: 10px 24rpx;\r\n\t\toverflow: hidden;\r\n\t\tcolor: #323233;\r\n\t\tfont-size: 14px;\r\n\t\tline-height: 24px;\r\n\t\tbackground-color: #fff;\r\n\r\n\t\t/deep/.u-badge {\r\n\t\t\tmargin: 6rpx;\r\n\r\n\t\t}\r\n\t}\r\n\r\n\t.u-index-list {\r\n\t\t.friendShip {\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\r\n\t\t\t.nickname {\r\n\t\t\t\tpadding-left: 20rpx;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./contacts.vue?vue&type=style&index=0&id=4ed3d3e6&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./contacts.vue?vue&type=style&index=0&id=4ed3d3e6&lang=less&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1700443981634\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}